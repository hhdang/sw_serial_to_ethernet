

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>System description &mdash; Serial to Ethernet bridging application manual v documentation</title>

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/globals.css"  type="text/css" />
    <link rel="stylesheet" href="_static/ui.css" type="text/css" />
    <link rel="stylesheet" href="_static/app.css"  type="text/css" />
    <link rel="stylesheet" href="_static/mobile.css"  type="text/css" />
    <link rel="stylesheet" href="_static/xde.css"
    type="text/css" /><script type="text/javascript" src="_static/scripts.js"></script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Serial to Ethernet bridging application manual v documentation" href="index.html" />
    <link rel="next" title="Programming guide" href="page3.html" />
    <link rel="prev" title="Hardware platforms" href="page1.html" /> 
  </head>
  <body class="xde indented-content" onload="prepareContents();">  
          <div id="body">
             <div id="content">
             <h1>System description</h1>

             <div class='columns'>
            
  <p>This section briefly describes the software components used, logical cores and resource usage details.</p>
<h2 class="topic" id="software-architecture">Software architecture</h2>
<div><div class="figure">
<div class="caption"><span>Core usage</span></div>
<img alt="_images/s2e_cores.png" src="_images/s2e_cores.png" />
</div>
<p>In order to achieve the desired data bridging, this application essentially maps each of the configured UART to a telnet socket and maintains application buffers (FIFOs) for each of such mapping. Whenever there is any UART data available, the <cite>UART Handler</cite> core fills the appropriate UART Rx buffer and notifies <cite>TCP Handler</cite> logical core to consume this data. Similarly whenever there is any Ethernet data from <cite>Ethernet MAC/MII server</cite>, <cite>XTCP Server</cite> logical core notifies <cite>TCP Handler</cite> core, which acts as a TCP client about data availability. <cite>TCP Handler</cite> stores this data into respective application buffers. This data is then consumed by <cite>UART handler</cite> and then pushed to <cite>UART Tx ports</cite> by <cite>UART TX server</cite> logical core.</p>
<h3 id="cores">Cores</h3>
<div><p>The design uses seven logical cores as described below.</p>
<p>The MultiUART component comprises two logical cores, one acting as a transmit (TX) server for up to 8 UARTs, and the other acting as a receive (RX) server for up to 8 UARTs.</p>
<p>UART_handler is an application core that interfaces with the UART RX and TX servers. It handles UART configuration requests, facilitates to store the UART data received from UART RX server into respective application buffers and transfers the data received from TCP clients to UART TX server.</p>
<p>TCP_Handler is another application core that initializes and manages the application. It interfaces with the flash module for UART configuration storage and recovery, handles all the xtcp application events (application data and UI configuration requests) received from the xtcp server module. UDP discovery management, web server handling, telnet data extraction are all implemented in this logical core.</p>
<p>The XTCP server runs on a single logical core and connects to the Ethernet MAC component which uses a single logical core. It uses XC channel to communicate to clients (TCP_Handler in this case) using XTCP events.</p>
<p>The Flash core handles flash data sotrage and retrieval requests from TCP_handler core based on the application dynamics such as start-up or UI driven requests.</p>
</div><h3 id="buffering">Buffering</h3>
<div><p>Buffering for the TX server is managed by the UART_handler Core. Data is transferred to the UART TX logical core via a shared memory interface.</p>
<p>There is no buffering provided by the UART RX server. The UART_handler core is able to respond to the received data in real time and store them in buffer(s) available in the  TCP_handler core via token notifcations.</p>
</div><h3 id="communication-model">Communication model</h3>
<div><p>The <tt class="docutils literal"><span class="pre">sc_multi_uart</span></tt> module utilises a combination of shared memory and channel communication. Channel communication is used on both the RX and TX servers to pause the logical core and subsequently release the logical core when required for reconfiguration. The primary means of data transfer for both the RX and TX logical cores is via shared memory. The RX logical core utilises a channel to notify any client (UART_handler in this case) of available data - this means that events can be utilised within an application to avoid the requirement for polling for received data.</p>
<p>XTCP module and flash core connects to TCP_handler client using their repective XC channels.</p>
</div></div><h2 class="topic" id="software-components-used">Software components used</h2>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p>Component</p>
</th>
<th class="head"><p>Description</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>sc_ethernet</p>
</td>
<td><p>Two logical core (lite) version of the ethernet component implementing 10/100 MII Ethernet MAC and filters</p>
</td>
</tr>
<tr><td><p>sc_xtcp</p>
</td>
<td><p>Micro TCP/IP stack for use with sc_ethernet component</p>
</td>
</tr>
<tr><td><p>sc_multi_uart</p>
</td>
<td><p>Component for implementing multiple serial device communication</p>
</td>
</tr>
<tr><td><p>sc_util</p>
</td>
<td><p>General utility modules for developing for XMOS devices</p>
</td>
</tr>
<tr><td><p>sc_website</p>
</td>
<td><p>Component framework for Embedded web site development</p>
</td>
</tr>
<tr><td><p>sc_slicekit_support</p>
</td>
<td><p>sliceKIT library to use L-series core board&#8217;s flash for application</p>
</td>
</tr>
<tr><td><p>sc_otp</p>
</td>
<td><p>Library for reading MAC from sliceKIT core board&#8217;s OTP memory</p>
</td>
</tr>
</tbody>
</table>
</div><h2 class="topic" id="resource-usage">Resource usage</h2>
<div><p>The overall platform usage and individual node usage shown in the figure below. User can get this information on the <cite>Binary</cite> window or by a <tt class="docutils literal"><span class="pre">double</span> <span class="pre">click</span></tt> of the binary file present on the <cite>Binaries</cite> folder in <cite>Project Explorer</cite>, after compiling the application using <cite>xTIMEcomposer</cite>.</p>
<div class="figure" id="fig-resource-usage">
<div class="caption"><span>Resource usage</span></div>
<img alt="_images/resource_usage.jpg" src="_images/resource_usage.jpg" />
</div>
</div>

             </div>
             </div>


          </div>

          <div>
             <!--seealsos-->
          </div><div id="local_seealso">
             <h1>See Also</h1>
             <ul class="iconmenu">
             <li><a href="page0.html">Application Overview</a></li>
             <li><a href="page1.html">Hardware platforms</a></li>
             <li><a href="page3.html">Programming guide</a></li>
             <li><a href="page4.html">API</a></li>
             <li><a href="page5.html">Using the application</a></li>
             <li><a href="page6.html">References</a></li>
             </ul>
          </div>
    <div class="footer">
    </div>
  </body>
</html>