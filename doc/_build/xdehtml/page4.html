

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API &mdash; Serial to Ethernet bridging application manual v documentation</title>

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/globals.css"  type="text/css" />
    <link rel="stylesheet" href="_static/ui.css" type="text/css" />
    <link rel="stylesheet" href="_static/app.css"  type="text/css" />
    <link rel="stylesheet" href="_static/mobile.css"  type="text/css" />
    <link rel="stylesheet" href="_static/xde.css"
    type="text/css" /><script type="text/javascript" src="_static/scripts.js"></script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Serial to Ethernet bridging application manual v documentation" href="index.html" />
    <link rel="next" title="Using the application" href="page5.html" />
    <link rel="prev" title="Programming guide" href="page3.html" /> 
  </head>
  <body class="xde indented-content" onload="prepareContents();">  
          <div id="body">
             <div id="content">
             <h1>API</h1>

             <div class='columns'>
            
  <h2 class="topic" id="configuration-defines"><span id="sec-conf-defines"></span>Configuration defines</h2>
<div><p>The files multi_uart_tx_conf.h and multi_uart_rx_conf.h must be copied from
app_multi_uart_demo\src folder to app_serial_to_ethernet_demo\src folder</p>
<p><strong>UART_RX_CHAN_COUNT</strong></p>
<blockquote>
<div><p>Default value = 8</p>
<p>Define the number of channels that are to be supported, must fit in the port. Also, must be a power of 2 (i.e. 1,2,4,8) - not all channels have to be utilised</p>
</div></blockquote>
<p><strong>UART_TX_CHAN_COUNT</strong></p>
<blockquote>
<div><p>Default value = 8</p>
<p>Define the number of channels that are to be supported, must fit in the port. Also, must be a power of 2 (i.e. 1,2,4,8) - not all channels have to be utilised</p>
</div></blockquote>
<p><strong>UART_RX_MAX_BAUD</strong></p>
<blockquote>
<div><p>Default value = 115200</p>
<p>Define maximum baud rate to be supprted for any of the UART channel</p>
</div></blockquote>
<p><strong>UART_TX_BUF_SIZE</strong></p>
<blockquote>
<div><p>Default value = 8</p>
<p>Define the buffer size in UART word entries - needs to be a power of 2 (i.e. 1,2,4,8,16,32 etc)</p>
</div></blockquote>
<p>The file xtcp_client_conf.h defines configuration fexibility required for XTCP clients in order to use XTCP server functions</p>
<p><strong>UIP_CONF_RECEIVE_WINDOW</strong></p>
<blockquote>
<div><p>Default value = 128</p>
<p>Define window length of TCP packets that the application will receive and process for each TCP packets received from XTCP clients.
Note this value will be set as default length of application buffers that will be used to hold UART data collected from XTCP clients.</p>
</div></blockquote>
<p><strong>XTCP_CLIENT_BUF_SIZE</strong></p>
<blockquote>
<div><p>Default value = 650</p>
<p>Define MTU size used for XTCP device packet transmissions</p>
</div></blockquote>
<p>The file udp_discovery.h defines ports used for UDP discovery.
This file can set the following defines:</p>
<p><strong>UDP_RECV_BUF_SIZE</strong></p>
<blockquote>
<div><p>Default value = 80</p>
<p>Define length of UDP message buffer which holds the incoming UDP test server request
or its corresponding S2E response</p>
</div></blockquote>
<p><strong>INCOMING_UDP_PORT</strong></p>
<blockquote>
<div><p>Default value = 15534</p>
<p>Define incoming UDP port to listen to device discovery requests from UDP test server</p>
</div></blockquote>
<p><strong>OUTGOING_UDP_PORT</strong></p>
<blockquote>
<div><p>Default value = 15533</p>
<p>Define outgoing UDP port in order to send device response to UDP test server</p>
</div></blockquote>
<p><strong>S2E_FIRMWARE_VER</strong></p>
<blockquote>
<div><p>Current value = 1.1.2</p>
<p>Define to specify S2E firmware version. This shall be updated for every release</p>
</div></blockquote>
<p><strong>UART_RX_FLUSH_DELAY</strong></p>
<blockquote>
<div><p>Default value = 20000000</p>
<p>If UART data received is lesser than minimum configured packet size, this defines a
minimum wait time to send this data to telnet handler</p>
</div></blockquote>
<p>The file telnet_config.h defines ports used for Telnet socket used for UART configuration.</p>
<p><strong>S2E_TELNET_CONFIG_PORT</strong></p>
<blockquote>
<div><p>Default value = 23</p>
<p>Define to specify telnet port to use for UART configuration</p>
</div></blockquote>
</div><h2 class="topic" id="constants"><span id="sec-const"></span>Constants</h2>
<div><p>The file srcs2e_flash.h has some constants defined which may be used by other files while accessing flash.</p>
<p><strong>S2E_FLASH_ERROR</strong></p>
<blockquote>
<div><p>Default value = -1</p>
<p>Any errors (like flash not present, wrong flash, unable to write, etc...) while accessing the flash fitted on the board, are represented using this constant.</p>
</div></blockquote>
<p><strong>S2E_FLASH_OK</strong></p>
<blockquote>
<div><p>Default value = 0</p>
<p>All successfull flash operations are represented using this constant.</p>
</div></blockquote>
<p><strong>UART_CONFIG</strong></p>
<blockquote>
<div><p>Default value = 0</p>
<p>To be used as a data type parameter while calling flash routines. This also represents the sector index (relative to webpage image) in the flash where UART configuration must be stored.</p>
</div></blockquote>
<p><strong>IPVER</strong></p>
<blockquote>
<div><p>Default value = 1</p>
<p>To be used as a data type parameter while calling flash routines. This also represents the sector index (relative to webpage image) in the flash where IP configuration must be stored.</p>
</div></blockquote>
<p><strong>FLASH_CMD_SAVE</strong></p>
<blockquote>
<div><p>Default value = 1</p>
<p>Flash command to &#8216;save&#8217; configuration to flash.</p>
</div></blockquote>
<p><strong>FLASH_CMD_RESTORE</strong></p>
<blockquote>
<div><p>Default value = 2</p>
<p>Flash command to &#8216;restore&#8217; configuration from flash.</p>
</div></blockquote>
<p><strong>FLASH_DATA_PRESENT</strong></p>
<blockquote>
<div><p>Default value = $</p>
<p>While &#8216;saving&#8217; settings to flash, this value is written as the first byte. So, on a &#8216;restore&#8217; command, by reading for this sybol, we would know that some data is present in that sector of flash.</p>
</div></blockquote>
</div><h2 class="topic" id="data-structures"><span id="sec-data-struct"></span>Data structures</h2>
<div><ul class='lib'><li class="type">
<h2 id="uart_config_data_t">
<tt class="descname">uart_config_data_t</tt></h2>
<p>Structure to hold UART configuration details.</p>
<p><strong>Structure Members:</strong></p>
<ul class='lib'><li class="member">
<h2 id="uart_config_data_t.channel_id">
int <tt class="descname">channel_id</tt></h2>
<p>UART Id.</p>
</li>

<li class="member">
<h2 id="uart_config_data_t.parity">
e_uart_config_parity <tt class="descname">parity</tt></h2>
<p>One of valid parity: Odd, Even, Mark, Space, None.</p>
</li>

<li class="member">
<h2 id="uart_config_data_t.stop_bits">
e_uart_config_stop_bits <tt class="descname">stop_bits</tt></h2>
<p>Stop bits configuration: Single or Two.</p>
</li>

<li class="member">
<h2 id="uart_config_data_t.polarity">
e_uart_config_polarity <tt class="descname">polarity</tt></h2>
<p>Polarity setting: Start bit as 1 or 0.</p>
</li>

<li class="member">
<h2 id="uart_config_data_t.baud">
int <tt class="descname">baud</tt></h2>
<p>Baud rate of UART channel.</p>
</li>

<li class="member">
<h2 id="uart_config_data_t.char_len">
int <tt class="descname">char_len</tt></h2>
<p>Number of bits each UART character contain.</p>
</li>

</ul></li>

</ul></div><h2 class="topic" id="configuration-functions"><span id="sec-conf-func"></span>Configuration functions</h2>
<div><ul class='lib'><li class="function">
<h2 id="uart_config_init">
void <tt class="descname">uart_config_init</tt><big>(</big>chanend<em>&nbsp;c_uart_config</em>, chanend<em>&nbsp;?c_flash_data</em>, chanend<em>&nbsp;?c_xtcp</em>, int<em>&nbsp;&amp;telnet_port_address</em><big>)</big></h2>
<p>This function retrieves configuration of each UARTs from flash, and applies it to the base configuration structure of type uart_config_data_t.</p>
<p>Telnet port applicable for corresponding UART is also fetched from flash and applied to repective UART configuration structure. If there is no valid flash configuration, default in-program configuration with following values EvenParity-1StopBit-115200Baud-Start0Polarity-8UARTCharLen is used</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_uart_config</h2>
<p>Channel-end to communicate UART configuration details between TCP handler and UART handler thread</p>
</li>
<li><h2>c_flash_data</h2>
<p>Channel-end to communicate UART configuration data stored in flash to TCP handler thread</p>
</li>
<li><h2>c_xtcp</h2>
<p>Channel-end between XTCP and TCP handler thread</p>
</li>
<li><h2>telnet_port_address</h2>
<p>Reference to structure holding Telnet port addresses mapped for UARTs</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="s2e_webserver_init">
void <tt class="descname">s2e_webserver_init</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;?c_flash</em>, chanend<em>&nbsp;c_uart_config</em>, chanend<em>&nbsp;?c_flash_data</em><big>)</big></h2>
<p>s2e_webserver_init The S2E webserver initialization routine.</p>
<p>Registers all channels used by it.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>channel connecting to the xtcp module</p>
</li>
<li><h2>c_flash</h2>
<p>channel for web page data</p>
</li>
<li><h2>c_uart_config</h2>
<p>channel for UART configuration</p>
</li>
<li><h2>c_flash_data</h2>
<p>channel for s2e flash data</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="telnet_to_uart_init">
void <tt class="descname">telnet_to_uart_init</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;c_uart_data</em>, int<em>&nbsp;telnet_port_address[]</em><big>)</big></h2>
<p>This function initializes UART state structure, assigns configured/default telnet ports and listens on these ports, shares UART buffer references to UART handler thread.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>Channel-end between XTCP and TCP handler thread</p>
</li>
<li><h2>c_uart_data</h2>
<p>Channel-end to communicate UART data between TCP handler and UART handler thread</p>
</li>
<li><h2>telnet_port_address</h2>
<p>Array contining telnet ports mapped for configured UARTs</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="udp_discovery_init">
void <tt class="descname">udp_discovery_init</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;c_flash_data</em>, xtcp_ipconfig_t<em>&nbsp;&amp;ipconfig</em><big>)</big></h2>
<p>This function initializes UDP discovery state, fetches S2E IP address stored in flash and references to ETH thread in order to configure device IP.</p>
<p>If valid IP is not present in flash, default configured IP defined from ipconfig is used</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>Channel between XTCP and TCP handler thread</p>
</li>
<li><h2>c_flash_data</h2>
<p>Channel between Flash and TCP handler thread</p>
</li>
<li><h2>ipconfig</h2>
<p>Reference to structure holding IP configuration info</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

</ul></div><h2 class="topic" id="interface-functions"><span id="sec-xface-func"></span>Interface functions</h2>
<div><ul class='lib'><li class="function">
<h2 id="uart_handler">
void <tt class="descname">uart_handler</tt><big>(</big>chanend<em>&nbsp;c_uart_data</em>, chanend<em>&nbsp;c_uart_config</em>, streaming chanend<em>&nbsp;c_uart_rx</em>, streaming chanend<em>&nbsp;c_uart_tx</em><big>)</big></h2>
<p>This function configures UARTs, initializes application buffers states.</p>
<p>As a part of event handling, this function does the following: (i) handles incoming data from UARTs and stores into appropirate buffers (ii) in case of data transfer transaction, either notifies or acknowledges TCP handler about UART data; otherwise, listens from TCP handler to (a) collect telnet received data to UART (b) share appropriate UART buffer holding UART recived data (iii) in case of UART configuration requests, collects appropriate UART configuration and reconfigures UART for received configuration (iv) sends a data byte from telnet UART buffers in a round robin basis, and notifies current transmit and receive transactions</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_uart_data</h2>
<p>Channel-end to communicate UART data between TCP handler and UART handler thread</p>
</li>
<li><h2>c_uart_config</h2>
<p>Channel-end to communicate UART configuration details between TCP handler and UART handler thread</p>
</li>
<li><h2>c_uart_rx</h2>
<p>Channel primarily to send UART data from application to MultiUART RX server thread</p>
</li>
<li><h2>c_uart_tx</h2>
<p>Channel primarily to collect UART data from MultiUART TX server thread into UART handler thread</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="tcp_handler">
void <tt class="descname">tcp_handler</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;c_uart_data</em>, chanend<em>&nbsp;c_uart_config</em>, chanend<em>&nbsp;?c_flash_web</em>, chanend<em>&nbsp;?c_flash_data</em><big>)</big></h2>
<p>This function handles TCP handler thread.</p>
<p>During initialization, IP configuration details stored in flash are retrieved from UDP discovery function and passed on to ETH thread This thread mainly handles (a) all XTCP events and invokes respective sub-function handlers (b) notification messages from UART handler thread for UART data transactions</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>Channel-end between XTCP and TCP handler thread</p>
</li>
<li><h2>c_uart_data</h2>
<p>Channel-end to communicate UART data between TCP handler and UART handler thread</p>
</li>
<li><h2>c_uart_config</h2>
<p>Channel-end to communicate UART configuration data TCP handler and UART handler thread</p>
</li>
<li><h2>c_flash_web</h2>
<p>Channel-end to communicate Web page data stored in flash to TCP handler thread</p>
</li>
<li><h2>c_flash_data</h2>
<p>Channel-end to communicate UART configuration data stored in flash to TCP handler thread</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="telnet_config_event_handler">
void <tt class="descname">telnet_config_event_handler</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;c_uart_config</em>, chanend<em>&nbsp;c_flash_data</em>, xtcp_connection_t<em>&nbsp;&amp;conn</em><big>)</big></h2>
<p>This function handles UART configuration requests from telnet configuration client.</p>
<p>It initializes cofnig parse state machine, receives configuration request events, sends response back to the client</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>Channel-end between XTCP and TCP handler thread</p>
</li>
<li><h2>c_uart_configChannel-end</h2>
<p>to communicate UART configuration data TCP handler and UART handler thread</p>
</li>
<li><h2>c_flash_data</h2>
<p>Channel-end to communicate UART configuration data stored in flash to TCP handler thread</p>
</li>
<li><h2>conn</h2>
<p>Reference to structure holding IP configuration info</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="s2e_webserver_event_handler">
void <tt class="descname">s2e_webserver_event_handler</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;?c_flash</em>, chanend<em>&nbsp;c_uart_config</em>, xtcp_connection_t<em>&nbsp;&amp;conn</em><big>)</big></h2>
<p>s2e_webserver_event_handler Handles webserver event.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>channel connecting to the xtcp module</p>
</li>
<li><h2>c_flash</h2>
<p>channel for web page data</p>
</li>
<li><h2>c_uart_config</h2>
<p>channel for UART configuration</p>
</li>
<li><h2>conn</h2>
<p>XTCP connection state</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="telnet_to_uart_event_handler">
void <tt class="descname">telnet_to_uart_event_handler</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;c_uart_data</em>, xtcp_connection_t<em>&nbsp;&amp;conn</em><big>)</big></h2>
<p>This function handles XTCP events related to Telnet data communication.</p>
<p>For any event, a correponding UART is mapped from XTCP connection As a part of event handling, this function does the following: (i) for new connections, TCP connection details are stored and telnet parse state machine and TCP ack mode is initialized (ii) for recieve events, data from TCP stack is collected into appropriate UART buffers. Received data is sent to telnet parser server in order to separate application data from telnet protocol. Initiates UART data transaction on c_uart_data channel in order to send data to UART (iii) for send requests initiated by telnet handler, this handler performs either of the following functionality (a) welcome messages are sent to respective telnet clients at the start of each session (b) collect outstanding data from appropriate UART RX active buffer and sends on XTCP connection</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>Channel-end between XTCP and TCP handler thread</p>
</li>
<li><h2>c_uart_data</h2>
<p>Channel-end to communicate UART data between TCP handler and UART handler thread</p>
</li>
<li><h2>conn</h2>
<p>Reference to structure holding IP configuration info</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="udp_discovery_event_handler">
void <tt class="descname">udp_discovery_event_handler</tt><big>(</big>chanend<em>&nbsp;c_xtcp</em>, chanend<em>&nbsp;c_flash_data</em>, xtcp_connection_t<em>&nbsp;&amp;conn</em><big>)</big></h2>
<p>Handles events related to UDP discovery functionality.</p>
<p>Receives S2E identification and IP configuration requests from UDP test server, frames and sends S2E response messages</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_xtcp</h2>
<p>Channel between XTCP and TCP handler thread</p>
</li>
<li><h2>c_flash_data</h2>
<p>Channel between Flash and TCP handler thread</p>
</li>
<li><h2>conn</h2>
<p>Reference to UDP connection state</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>None</p>
</div></li>

<li class="function">
<h2 id="s2e_flash">
void <tt class="descname">s2e_flash</tt><big>(</big>chanend<em>&nbsp;c_flash_web</em>, chanend<em>&nbsp;c_flash_data</em>, fl_SPIPorts<em>&nbsp;&amp;flash_ports</em><big>)</big></h2>
<p>s2e_flash The S2E flash thread will keep looking for data (or commands) on the c_flash_data channel.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_web</h2>
<p>channel for webpage data</p>
</li>
<li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
<li><h2>flash_ports</h2>
<p>reference to flash ports used by the device</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="send_data_to_flash_thread">
void <tt class="descname">send_data_to_flash_thread</tt><big>(</big>chanend<em>&nbsp;c_flash_data</em>, <a class="reference" href="#uart_config_data_t" title="uart_config_data_t"><span>uart_config_data_t</span></a><em>&nbsp;&amp;data</em><big>)</big></h2>
<p>send_data_to_flash_thread Send UART configuration data to flash.</p>
<p>Send one configuration at a time. In order to send configuration for all the channels, this routine must be called in a loop; each time sending the current channels config.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
<li><h2>data</h2>
<p>reference to the current channel&#8217;s config</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="get_data_from_flash_thread">
void <tt class="descname">get_data_from_flash_thread</tt><big>(</big>chanend<em>&nbsp;c_flash_data</em>, <a class="reference" href="#uart_config_data_t" title="uart_config_data_t"><span>uart_config_data_t</span></a><em>&nbsp;&amp;data</em>, int<em>&nbsp;&amp;telnet_port</em><big>)</big></h2>
<p>get_data_from_flash_thread Get UART configuration data from flash.</p>
<p>Get one configuration at a time. In order to get configuration for all the channels, this routine must be called in a loop; each time updating the current channels config. Telnet ports for each channel are also updated.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
<li><h2>data</h2>
<p>reference to the current channel&#8217;s config to update</p>
</li>
<li><h2>telnet_port</h2>
<p>reference to current channel&#8217;s telnet port to update</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="send_ipconfig_to_flash_thread">
void <tt class="descname">send_ipconfig_to_flash_thread</tt><big>(</big>chanend<em>&nbsp;c_flash_data</em>, xtcp_ipconfig_t<em>&nbsp;&amp;ip</em><big>)</big></h2>
<p>send_ipconfig_to_flash_thread Send IP configuration data to flash.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
<li><h2>ip</h2>
<p>reference to the current IP config</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="get_ipconfig_from_flash_thread">
void <tt class="descname">get_ipconfig_from_flash_thread</tt><big>(</big>chanend<em>&nbsp;c_flash_data</em>, xtcp_ipconfig_t<em>&nbsp;&amp;ip</em><big>)</big></h2>
<p>get_ipconfig_from_flash_thread Get IP configuration data from flash.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
<li><h2>ip</h2>
<p>reference to the current IP config</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="send_cmd_to_flash_thread">
void <tt class="descname">send_cmd_to_flash_thread</tt><big>(</big>chanend<em>&nbsp;c_flash_data</em>, int<em>&nbsp;data_type</em>, int<em>&nbsp;command</em><big>)</big></h2>
<p>send_cmd_to_flash_thread Send command to flash thread.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
<li><h2>data_type</h2>
<p>UART_CONFIG (or) IPVER</p>
</li>
<li><h2>command</h2>
<p>FLASH_CMD_SAVE (or) FLASH_CMD_RESTORE</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>none</p>
</div></li>

<li class="function">
<h2 id="get_flash_access_result">
int <tt class="descname">get_flash_access_result</tt><big>(</big>chanend<em>&nbsp;c_flash_data</em><big>)</big></h2>
<p>get_flash_access_result Get the flash access result after performing certain command.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>c_flash_data</h2>
<p>channel for s2e data</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>int S2E_FLASH_ERROR (or) S2E_FLASH_OK</p>
</div></li>

</ul></div><h2 class="topic" id="module-functions"><span id="sec-module-func"></span>Module functions</h2>
<div><ul class='lib'><li class="function">
<h2 id="parse_telnet_buffer">
int <tt class="descname">parse_telnet_buffer</tt><big>(</big>char<em>&nbsp;data[]</em>, int<em>&nbsp;len</em>, int<em>&nbsp;&amp;parse_state</em>, int<em>&nbsp;&amp;close_request</em><big>)</big></h2>
<p>This function implements Telnet server functionality.</p>
<p>Mainly extracts application data from XTCP data packets in telnet protocol format.</p>
<h3 class="nosecnum compact" id="">Parameters</h3>
<div><ul class="field_list" class="latex_compact"><li><h2>data</h2>
<p>Buffer to store application data filtered from telnet server</p>
</li>
<li><h2>len</h2>
<p>Number of bytes of received data</p>
</li>
<li><h2>parse_state</h2>
<p>Current state of telnet parser state machine</p>
</li>
<li><h2>close_request</h2>
<p>Flag to set when telnet client is suspended</p>
</li>
</ul>
</div><h3 class="nosecnum compact" id="">Returns</h3>
<div><p>Length of application buffer</p>
</div></li>

</ul></div>

             </div>
             </div>


          </div>

          <div>
             <!--seealsos-->
          </div><div id="local_seealso">
             <h1>See Also</h1>
             <ul class="iconmenu">
             <li><a href="page0.html">Application Overview</a></li>
             <li><a href="page1.html">Hardware platforms</a></li>
             <li><a href="page2.html">System description</a></li>
             <li><a href="page3.html">Programming guide</a></li>
             <li><a href="page5.html">Using the application</a></li>
             <li><a href="page6.html">References</a></li>
             </ul>
          </div>
    <div class="footer">
    </div>
  </body>
</html>